# На прошлом занятии
* функции: начало


# План этого занятия
* пример использования функций

# Пример: составление анаграмм

В качестве примера использования функций и модуля стандартной библиотеки `random` рассмотрим задачу составления анаграмм. В качестве входного файла будем использовать любой текст, из которого мы выберем слова. Пусть текст находится в файле `text.txt` и имеет следующее содержание (из Яндекс.Рефератов):
```
Субъект вызывает мелодический импульс. Пласт параллельно понимает понимающий
эриксоновский гипноз, следовательно тенденция к конформизму связана с менее
низким интеллектом. Дифференциация, по определению, дает звукорядный
бихевиоризм.
```

Задача состоит в том, что необходимо составить файл формата [`CSV`](https://ru.wikipedia.org/wiki/CSV), состоящий из 4 колонок: слово из файла и три его случайных анаграммы. Для простоты анаграммы могут совпадать с самим словом или друг с другом. В итоге требуется получить файл `table.csv`, который будет начинаться следующим образом:
```
субъект,ъсукебт,кутесъб,кеубътс
вызывает,езтавыыв,аыезыввт,ывеаывзт
мелодический,скйчмеелидио,диимечеслйок,мкееийлчосид
импульс,млсупьи,уьмипсл,льмпиус
пласт,сатпл,таслп,тпалс
...
```

Полный код для решения этой задачи может выглядеть следующим образом:
```python
"""Эта программа собирает слова из text.txt и составляет список анаграмм из
них в таблице table.csv"""

# Здесь мы импортируем модуль стандартной библиотеки random, в котором
# содержаться функции для работы с псевдослучайными числами.
# Правило хорошего тона – делать все импорты в начале вашей программы.
import random

def words_from_file(filename):
    """Принимает имя файла, а точнее его системный путь, и возвращает
    список слов в нем
    """
    with open(filename, encoding='utf-8') as f:  # открвываем файл
        text = f.read()  # прочитываем весь файл в строковую переменную
    text = text.replace('-', '')  # удаляем дифисы
    text = text.replace(',', '').replace('.', '')  # удаляем запятые и точки
    # Тут можно было почистить текст еще лучше
    text = text.lower()  # заменяем все заглавные на строчные
    words = text.split()  # получаем список слов
    return words  # возвращаем список слов

def anа(word):
    """Возвращает случайную анаграмму word"""
    # Функция random.sample(sequence, count) возвращает список из count
    # уникальных элементов последовательности (например списка или строки)
    # взятых в случайном порядке. Заметим, что каждый элемент не может быть
    # больше одного раза, а также напомним то, что элементами строки являются
    # однобуквенные строки.
    a = random.sample(word, len(word))  # получаем список перемешанных букв
    new_word = ''.join(a)  # объединяем элементы списка из букв в одну строку
    return new_word  # возвращаем анаграмму

def create_csv_table(table_filename, words, n_anа):
    """Создает CSV-файл с именем table_filename со строками типа
    слово,анаграмма,анаграмма,...
    где список слов задается аргументом words, а число анаграмм —
    n_ana
    """
    with open(table_filename, 'w', encoding='utf-8') as f:  # открываем файл для записи
        for x in words:  # перебираем слова в переменной x
            f.write(x)  # запишем слово в файл
            for i in range(n_ana):  # n_ana раз создадим и запишем анаграмму
                f.write(',')  # запишем разделитель
                f.write(ana(x))  # запишем случайную анаграмму
            f.write('\n')  # не забудем поставить символ конца строки перед следующей строкой

words = words_from_file('text.txt')  # получаем список слов
create_csv_table('table.csv', words, 3)  # создаем таблицу с тремя анаграммами в каждой строке
```


# Домашнее задание

[Смотри предыдущий семинар](https://github.com/morgan1189/HSE-Programming/wiki/Занятие-07:-Функции#Домашнее-задание)